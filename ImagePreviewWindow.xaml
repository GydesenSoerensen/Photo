<Window x:Class="PhotoGallery.ImagePreviewWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Image Preview" 
        Height="600" Width="800" 
        MinHeight="400" MinWidth="500"
        WindowStartupLocation="CenterOwner"
        Background="Black">

    <Grid>
        <!-- Main content with proper WPF zoom support -->
        <ScrollViewer x:Name="MainScrollViewer"
                      HorizontalScrollBarVisibility="Auto"
                      VerticalScrollBarVisibility="Auto"
                      CanContentScroll="False"
                      Background="Black">

            <Grid x:Name="ContentContainer">
                <Grid.RenderTransform>
                    <ScaleTransform x:Name="ScaleTransform" ScaleX="1" ScaleY="1"/>
                </Grid.RenderTransform>

                <!-- Video Player -->
                <MediaElement x:Name="VideoPlayer"
                              LoadedBehavior="Manual"
                              UnloadedBehavior="Stop"
                              Stretch="Uniform"
                              Visibility="Collapsed"
                              MediaEnded="VideoPlayer_MediaEnded"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center" />

                <!-- Image Display -->
                <Image x:Name="FullImage"
                       Stretch="Uniform"
                       Visibility="Collapsed"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center" />
            </Grid>
        </ScrollViewer>

        <!-- Zoom controls overlay -->
        <StackPanel x:Name="ZoomControls"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Margin="10"
                    Background="#88000000">
            <Button Content="+" 
                    Width="30" Height="30"
                    Click="ZoomIn_Click"
                    Foreground="White"
                    Background="Transparent"
                    BorderThickness="1"
                    BorderBrush="White"/>
            <TextBlock x:Name="ZoomPercentage"
                       Text="100%"
                       VerticalAlignment="Center"
                       Foreground="White"
                       Margin="5,0"
                       MinWidth="40"
                       TextAlignment="Center"/>
            <Button Content="-"
                    Width="30" Height="30"
                    Click="ZoomOut_Click"
                    Foreground="White"
                    Background="Transparent"
                    BorderThickness="1"
                    BorderBrush="White"/>
            <Button Content="Reset"
                    Height="30"
                    Click="ZoomReset_Click"
                    Foreground="White"
                    Background="Transparent"
                    BorderThickness="1"
                    BorderBrush="White"
                    Margin="5,0,0,0"/>
        </StackPanel>

        <!-- Status bar -->
        <Border x:Name="StatusOverlay"
                Background="#88000000"
                Height="30"
                VerticalAlignment="Bottom"
                HorizontalAlignment="Stretch"
                Visibility="Collapsed">
            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center">
                <TextBlock x:Name="StatusText"
                           Text="Loading..."
                           Foreground="White"
                           FontSize="12"
                           Margin="10,0"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>